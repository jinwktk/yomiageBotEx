# yomiageBotEx - プロジェクト概要

## プロジェクトの目的
yomiageBotExは、Discordボイスチャンネルで読み上げ機能を提供するボット（Python版）です。

## 主な機能

### 基本機能
- Discordボイスチャンネルへの自動参加・退出
- ユーザーの参加・退出時の挨拶音声再生

### チャット読み上げ機能
- リアルタイムでチャットメッセージを音声で読み上げ
- URL、メンション、絵文字の自動変換
- 読み上げON/OFF切り替え（`/reading`コマンド）
- プレフィックス（!、/、.、?）で始まるメッセージは除外

### 録音・リプレイ機能
- 最大10分間の音声バッファリング
- `/replay`コマンドで過去の音声を再生
- 録音ファイルの自動管理（1時間後削除）
- リアルタイム音声受信（フォールバック機能付き）

### TTS機能（オプション）
- Style-Bert-VITS2との連携
- 音声キャッシュによる高速化
- フォールバック機能（ビープ音での代替再生）

### 音声リレー機能（新機能）
- 音声横流し（リレー）機能：あるVCチャンネルの音声を別のVCチャンネルに即座に転送
- セッション管理：複数の音声リレーセッションの並列実行・管理
- 自動開始：ボット起動時に設定されたリレーペアを自動開始

### その他の高度機能
- 辞書機能：単語・読み方の管理システム
- ユーザー別設定システム：個人別TTS・読み上げ設定
- 音声処理：FFmpeg音声正規化・フィルタリング
- ログローテーション：圧縮付きローテーション機能

## 利用可能なコマンド
| コマンド | 説明 |
|---------|------|
| `/join` | ボイスチャンネルに参加 |
| `/leave` | ボイスチャンネルから退出 |
| `/replay` | 最近の音声を録音してチャットに投稿（1-300秒） |
| `/recordings` | 最近の録音リストを表示 |
| `/reading` | チャット読み上げのON/OFFを切り替え |
| `/dict_add` | 辞書に単語を追加 |
| `/dict_remove` | 辞書から単語を削除 |
| `/my_settings` | 現在の個人設定を表示 |
| `/set_reading` | 読み上げ設定を変更 |
| `/set_global_tts` | サーバー全体のTTS設定を変更（管理者限定） |

## PST.exe（Process Stoper Tool）との競合問題
Palworld ServerのPST.exeが9:00AMに自動でDiscord botを終了させる場合があります。解決策として、保護モードでの起動（`scripts/start.bat`使用）が推奨されています。